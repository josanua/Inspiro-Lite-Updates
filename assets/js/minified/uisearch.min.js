!function(t){"use strict";function e(t,e){Window.prototype[t]=HTMLDocument.prototype[t]=Element.prototype[t]=e}var s;function n(t,e){this.el=t,this.inputEl=t.querySelector("form input.sb-search-input"),this._initEvents()}!t.addEventListener&&t.Element&&(s=[],e("addEventListener",function(t,e){var n=this;s.unshift({__listener:function(t){t.currentTarget=n,t.pageX=t.clientX+document.documentElement.scrollLeft,t.pageY=t.clientY+document.documentElement.scrollTop,t.preventDefault=function(){t.returnValue=!1},t.relatedTarget=t.fromElement||null,t.stopPropagation=function(){t.cancelBubble=!0},t.relatedTarget=t.fromElement||null,t.target=t.srcElement||n,t.timeStamp=+new Date,e.call(n,t)},listener:e,target:n,type:t}),this.attachEvent("on"+t,s[0].__listener)}),e("removeEventListener",function(t,e){for(var n=0,i=s.length;n<i;++n)if(s[n].target==this&&s[n].type==t&&s[n].listener==e)return this.detachEvent("on"+t,s.splice(n,1)[0].__listener)}),e("dispatchEvent",function(e){try{return this.fireEvent("on"+e.type,e)}catch(t){for(var n=0,i=s.length;n<i;++n)s[n].target==this&&s[n].type==e.type&&s[n].call(this,e)}})),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),n.prototype={_initEvents:function(){function t(t){t.stopPropagation(),e.inputEl.value=e.inputEl.value.trim(),classie.has(e.el,"sb-search-open")?(classie.has(e.el,"sb-search-open")&&/^\s*$/.test(e.inputEl.value)||classie.has(e.el,"sb-search-open")&&(classie.has(t.target,"sb-icon-search")||"use"===t.target.nodeName))&&(t.preventDefault(),e.close()):(t.preventDefault(),e.open())}var e=this;this.el.addEventListener("click",t),this.el.addEventListener("touchstart",t),this.inputEl.addEventListener("click",function(t){t.stopPropagation()}),this.inputEl.addEventListener("touchstart",function(t){t.stopPropagation()})},open:function(){var e=this;classie.add(this.el,"sb-search-open"),this.inputEl.focus();var n=function(t){e.close(),this.removeEventListener("click",n),this.removeEventListener("touchstart",n)};document.addEventListener("click",n),document.addEventListener("touchstart",n)},close:function(){this.inputEl.blur(),classie.remove(this.el,"sb-search-open"),this.el.querySelector(".sb-search-button-open").focus()}},t.UISearch=n}(window);